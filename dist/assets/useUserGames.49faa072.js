import{b as I,c as U,A as V,h as O,k as $,l as w,u as P,r as f,a as C,f as T}from"./index.cdcf1626.js";const{setGamesLoader:p,setGamesError:G}=O,j="https://api.rawg.io/api/games",i=I.dispatch,k=async(n,e)=>{try{i(p(!1));const t=n.map(r=>U.get(`${j}/${r}?key=${V}`)),s=(await Promise.allSettled(t)).filter(({status:r})=>r==="fulfilled").map(({value:r})=>r.data);e(s),i(G(!1)),i(p(!1))}catch(t){e([]),i(p(!1)),i(G(t))}},{SEARCH:E,ORDERING:v,GENRES:D,PLATFORMS:H,PUBLISHERS:B,STORES:K,TAGS:M}=$,m=w("id"),W=(n,e)=>{const t=Object.values(n).reduce((s,r)=>{const{propName:a,value:o}=r;return a===v?s:a===E?(s[a]=o.toLowerCase(),s):(s[a]=o.map(({id:u})=>u),s)},{});return e.filter(s=>{const{name:r,genres:a,platforms:o,publishers:u,stores:R,tags:A}=s,l=[],L=[m({array:a,propName:D}),m({array:o,propName:H}),m({array:u,propName:B}),m({array:R,propName:K}),m({array:A,propName:M})],d=r.toLowerCase().startsWith(t[E].trim());return d?(l.push(d),L.forEach(({propName:g,values:h})=>{if(!t[g].length)return l.push(!0);if(!h.length)return l.push(!1);const b=t[g].every(x=>h.includes(x));l.push(b)}),!l.includes(!1)):!1})},{setGames:S,setGamesLoader:y,setGamesError:N}=O,{setNumOfGames:F}=T,_=n=>{const e=P(),[t,c]=f.exports.useState([]),{currentFilters:s,userGames:r}=C(o=>o),a=r[n];f.exports.useEffect(()=>{if(!a.length){e(S([])),e(y(!1)),e(N(null)),e(F(0));return}e(N(null)),e(y(!0)),k(a,c)},[a]),f.exports.useEffect(()=>{if(!t.length)return;const o=W(s,t);e(S(o)),e(F(o.length))},[s,t])};export{_ as u};
